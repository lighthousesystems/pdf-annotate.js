!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PDFAnnotate=e():t.PDFAnnotate=e()}(self,(function(){return(()=>{var t={589:t=>{t.exports=function(t){var e=document.createElement("style"),n=Object.keys(t).map((function(e){return function(t,e){return t+" {\n"+function(t){return Object.keys(t).map((function(e){return function(t,e){isNaN(e)||0==e||(e+="px");return function(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))}(t)+": "+e+";"}(e,t[e])})).join("\n")}(e)+"\n}"}(e,t[e])})).join("\n");return e.setAttribute("type","text/css"),e.appendChild(document.createTextNode(n)),e}},187:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}t.exports=i,t.exports.once=function(t,e){return new Promise((function(n,r){function o(n){t.removeListener(e,i),r(n)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",o),n([].slice.call(arguments))}v(t,e,i,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&v(t,"error",e,n)}(t,o,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function s(t,e,n,r){var o,i,a,s;if(c(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]),void 0===a)a=i[e]=n,++t._eventsCount;else if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=u(t))>0&&a.length>o&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=l.bind(r);return o.listener=n,r.wrapFn=o,o}function f(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):y(o,o.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function v(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function o(i){r.once&&t.removeEventListener(e,o),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var o="error"===t,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var c=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw c.context=a,c}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)r(u,this,e);else{var s=u.length,l=y(u,s);for(n=0;n<s;++n)r(l[n],this,e)}return!0},i.prototype.addListener=function(t,e){return s(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return s(this,t,e,!0)},i.prototype.once=function(t,e){return c(e),this.on(t,d(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,d(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,r,o,i,a;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},i.prototype.listeners=function(t){return f(this,t,!0)},i.prototype.rawListeners=function(t){return f(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},418:t=>{"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function o(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,i){for(var a,c,u=o(t),s=1;s<arguments.length;s++){for(var l in a=Object(arguments[s]))n.call(a,l)&&(u[l]=a[l]);if(e){c=e(a);for(var d=0;d<c.length;d++)r.call(a,c[d])&&(u[c[d]]=a[c[d]])}}return u}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";function t(t){throw new Error(t+" is not implemented")}n.r(r),n.d(r,{default:()=>Re});var e=n(187),o=n.n(e),i=n(589),a="#00BFFF",c=n.n(i)()({body:{"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}});function u(t,e){for(var n=document.querySelectorAll('svg[data-pdf-annotate-container="true"]'),r=0,o=n.length;r<o;r++){var i=n[r];if(s(t,e,i.getBoundingClientRect()))return i}return null}function s(t,e,n){return e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right}function l(t){var e=d(t),n=y(t),r=n.offsetLeft,o=n.offsetTop;return{top:e.top+o,left:e.left+r,right:e.right+r,bottom:e.bottom+o}}function d(t){var e=0,n=0,r=0,o=0,i=t.getBoundingClientRect();switch(t.nodeName.toLowerCase()){case"path":var a,c,s,l;t.getAttribute("d").replace(/Z/,"").split("M").splice(1).forEach((function(t){var e=t.split(" ").map((function(t){return parseInt(t,10)}));(void 0===a||e[0]<a)&&(a=e[0]),(void 0===c||e[2]>c)&&(c=e[2]),(void 0===s||e[1]<s)&&(s=e[1]),(void 0===l||e[3]>l)&&(l=e[3])})),e=l-s,n=c-a,r=a,o=s;break;case"line":e=parseInt(t.getAttribute("y2"),10)-parseInt(t.getAttribute("y1"),10),n=parseInt(t.getAttribute("x2"),10)-parseInt(t.getAttribute("x1"),10),r=parseInt(t.getAttribute("x1"),10),o=parseInt(t.getAttribute("y1"),10),0===e&&(e+=16,o-=8);break;case"text":e=i.height,n=i.width,r=parseInt(t.getAttribute("x"),10),o=parseInt(t.getAttribute("y"),10);break;case"g":var d=y(t),p=d.offsetLeft,v=d.offsetTop;e=i.height,n=i.width,r=i.left-p,o=i.top-v,"strikeout"===t.getAttribute("data-pdf-annotate-type")&&(e+=16,o-=8);break;case"rect":case"svg":e=parseInt(t.getAttribute("height"),10),n=parseInt(t.getAttribute("width"),10),r=parseInt(t.getAttribute("x"),10),o=parseInt(t.getAttribute("y"),10)}var h={top:o,left:r,width:n,height:e,right:r+n,bottom:o+e};return["svg","g"].includes(t.nodeName.toLowerCase())||(h=f(u(i.left,i.top),h)),h}function f(t,e){var n={},r=m(t).viewport;return Object.keys(e).forEach((function(t){n[t]=e[t]*r.scale})),n}function p(t,e){var n={},r=m(t).viewport;return Object.keys(e).forEach((function(t){n[t]=e[t]/r.scale})),n}function y(t){for(var e=t;(e=e.parentNode)&&e!==document&&"SVG"!==e.nodeName.toUpperCase(););var n=e.getBoundingClientRect();return{offsetLeft:n.left,offsetTop:n.top}}function v(){c.parentNode||document.head.appendChild(c)}function h(){c.parentNode&&c.parentNode.removeChild(c)}function m(t){return{documentId:t.getAttribute("data-pdf-annotate-document"),pageNumber:parseInt(t.getAttribute("data-pdf-annotate-page"),10),viewport:JSON.parse(t.getAttribute("data-pdf-annotate-viewport"))}}c.setAttribute("data-pdf-annotate-user-select","true");var g,b=new(o());function w(){b.emit.apply(b,arguments)}function x(){b.on.apply(b,arguments)}function A(){b.removeListener.apply(b,arguments)}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}document.addEventListener("click",(function(t){if(u(t.clientX,t.clientY)){var e=function(t,e){var n=u(t,e);if(n){for(var r=n.querySelectorAll("[data-pdf-annotate-type]"),o=0,i=r.length;o<i;o++){var a=r[o];if(s(t,e,l(a)))return a}return null}}(t.clientX,t.clientY);g&&g!==e&&b.emit("annotation:blur",g),e&&b.emit("annotation:click",e),g=e}}));var S=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(this,e),Object.keys(n).forEach((function(e){"function"==typeof n[e]&&"function"==typeof t[e]&&(t[e]=n[e])}))}var n,r,o;return n=e,r=[{key:"__getAnnotations",value:function(e,n){t("getAnnotations")}},{key:"getAnnotations",get:function(){return this.__getAnnotations},set:function(t){this.__getAnnotations=function(e,n){return t.apply(void 0,arguments).then((function(t){return t.annotations&&t.annotations.forEach((function(t){t.documentId=e})),t}))}}},{key:"getAnnotation",value:function(e,n){t("getAnnotation")}},{key:"__addAnnotation",value:function(e,n,r){t("addAnnotation")}},{key:"addAnnotation",get:function(){return this.__addAnnotation},set:function(t){this.__addAnnotation=function(e,n,r){return t.apply(void 0,arguments).then((function(t){return w("annotation:add",e,n,t),t}))}}},{key:"__editAnnotation",value:function(e,n,r){t("editAnnotation")}},{key:"editAnnotation",get:function(){return this.__editAnnotation},set:function(t){this.__editAnnotation=function(e,n,r){return t.apply(void 0,arguments).then((function(t){return w("annotation:edit",e,n,t),t}))}}},{key:"__deleteAnnotation",value:function(e,n){t("deleteAnnotation")}},{key:"deleteAnnotation",get:function(){return this.__deleteAnnotation},set:function(t){this.__deleteAnnotation=function(e,n){return t.apply(void 0,arguments).then((function(t){return t&&w("annotation:delete",e,n),t}))}}},{key:"getComments",value:function(e,n){t("getComments")}},{key:"__addComment",value:function(e,n,r){t("addComment")}},{key:"addComment",get:function(){return this.__addComment},set:function(t){this.__addComment=function(e,n,r){return t.apply(void 0,arguments).then((function(t){return w("comment:add",e,n,t),t}))}}},{key:"__deleteComment",value:function(e,n){t("deleteComment")}},{key:"deleteComment",get:function(){return this.__deleteComment},set:function(t){this.__deleteComment=function(e,n){return t.apply(void 0,arguments).then((function(t){return t&&w("comment:delete",e,n),t}))}}}],r&&L(n.prototype,r),o&&L(n,o),e}(),C=/[xy]/g;function k(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}function I(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(C,k)}function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function j(t,e){return j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},j(t,e)}function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R(t);if(e){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}function N(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(n,t);var e=O(n);function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,{getAnnotations:function(t,e){return new Promise((function(n,r){var o=T(t).filter((function(t){return t.page===e&&"Annotation"===t.class}));n({documentId:t,pageNumber:e,annotations:o})}))},getAnnotation:function(t,e){return Promise.resolve(T(t)[B(t,e)])},addAnnotation:function(t,e,n){return new Promise((function(r,o){n.class="Annotation",n.uuid=I(),n.page=e;var i=T(t);i.push(n),q(t,i),r(n)}))},editAnnotation:function(t,e,n){return new Promise((function(r,o){var i=T(t);i[B(t,e)]=n,q(t,i),r(n)}))},deleteAnnotation:function(t,e){return new Promise((function(n,r){var o=B(t,e);if(o>-1){var i=T(t);i.splice(o,1),q(t,i)}n(!0)}))},getComments:function(t,e){return new Promise((function(n,r){n(T(t).filter((function(t){return"Comment"===t.class&&t.annotation===e})))}))},addComment:function(t,e,n){return new Promise((function(r,o){var i={class:"Comment",uuid:I(),annotation:e,content:n},a=T(t);a.push(i),q(t,a),r(i)}))},deleteComment:function(t,e){return new Promise((function(n,r){T(t);for(var o=-1,i=T(t),a=0,c=i.length;a<c;a++)if(i[a].uuid===e){o=a;break}o>-1&&(i.splice(o,1),q(t,i)),n(!0)}))}})}return n}(S);function T(t){return JSON.parse(localStorage.getItem("".concat(t,"/annotations")))||[]}function q(t,e){localStorage.setItem("".concat(t,"/annotations"),JSON.stringify(e))}function B(t,e){for(var n=-1,r=T(t),o=0,i=r.length;o<i;o++)if(r[o].uuid===e){n=o;break}return n}var M=n(418),F=n.n(M),X=/[A-Z]/g,Y=["viewBox"];function W(t,e){Object.keys(e).forEach((function(n){t.setAttribute(function(t){return-1===Y.indexOf(t)&&(t=t.replace(X,(function(t){return"-"+t.toLowerCase()}))),t}(n),e[n])}))}var z=/^([a-f0-9]{6}|[a-f0-9]{3})$/i;function H(t){return z.test(t)&&(t="#".concat(t)),t}var U=25;function D(t){var e=document.createElementNS("http://www.w3.org/2000/svg","rect");return W(e,{x:t.x,y:t.y,width:t.width,height:t.height}),e}function V(t){var e=t.content.split("\n"),n=[];if(1===e.length)return'<tspan x="'.concat(t.x,'" dy="1em">').concat(t.content,"</tspan>");for(var r=0;r<e.length;r++){var o=e[r];" "==o||""==o?n.push('<tspan x="'.concat(t.x,'" visibility="hidden" dy="1em">.</tspan>')):n.push('<tspan x="'.concat(t.x,'" dy="1em">').concat(o,"</tspan>"))}return n.join("")}var $=/firefox/i.test(navigator.userAgent);function J(t,e){var n=function(t){var e,n;switch(t.rotation%360){case 0:e=n=0;break;case 90:e=0,n=t.width/t.scale*-1;break;case 180:e=t.width/t.scale*-1,n=t.height/t.scale*-1;break;case 270:e=t.height/t.scale*-1,n=0}return{x:e,y:n}}(e);if(t.setAttribute("transform","scale(".concat(e.scale,") rotate(").concat(e.rotation,") translate(").concat(n.x,", ").concat(n.y,")")),!$&&"svg"===t.nodeName.toLowerCase()){t.setAttribute("x",parseInt(t.getAttribute("x"),10)*e.scale),t.setAttribute("y",parseInt(t.getAttribute("y"),10)*e.scale);var r=parseInt(t.getAttribute("x",10)),o=parseInt(t.getAttribute("y",10)),i=parseInt(t.getAttribute("width"),10),a=parseInt(t.getAttribute("height"),10),c=t.querySelector("path"),u=c.parentNode;switch([t,u,c,t.querySelector("rect")].forEach((function(t){t.setAttribute("width",parseInt(t.getAttribute("width"),10)*e.scale),t.setAttribute("height",parseInt(t.getAttribute("height"),10)*e.scale)})),J(c,F()({},e,{scale:1})),e.rotation%360){case 90:t.setAttribute("x",e.width-o-i),t.setAttribute("y",r),u.setAttribute("x",1),u.setAttribute("y",0);break;case 180:t.setAttribute("x",e.width-r-i),t.setAttribute("y",e.height-o-a),u.setAttribute("y",2);break;case 270:t.setAttribute("x",o),t.setAttribute("y",e.height-r-a),u.setAttribute("x",-1),u.setAttribute("y",0)}}return t}function Z(t,e,n){var r,o,i;switch(n||(n=JSON.parse(t.getAttribute("data-pdf-annotate-viewport"))),e.type){case"area":case"highlight":r=function(t){if("highlight"===t.type){var e=document.createElementNS("http://www.w3.org/2000/svg","g");return W(e,{fill:H(t.color||"#ff0"),fillOpacity:.2}),t.rectangles.forEach((function(t){e.appendChild(D(t))})),e}var n=D(t);return W(n,{stroke:H(t.color||"#f00"),fill:"none"}),n}(e);break;case"strikeout":o=e,W(i=document.createElementNS("http://www.w3.org/2000/svg","g"),{stroke:H(o.color||"#f00"),strokeWidth:o.strokeWidth||1,opacity:o.opacity||1,color:o.color}),o.rectangles.forEach((function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","line");W(e,{x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y}),i.appendChild(e)})),r=i;break;case"point":r=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","rect"),o=document.createElementNS("http://www.w3.org/2000/svg","path");return W(e,{width:U,height:U,x:t.x,y:t.y}),W(n,{width:U,height:U,x:0,y:-1.25,viewBox:"0 0 1000 1000"}),W(r,{width:U,height:U,stroke:"#000",fill:"#ff0"}),W(o,{d:"M499.968 214.336q-113.832 0 -212.877 38.781t-157.356 104.625 -58.311 142.29q0 62.496 39.897 119.133t112.437 97.929l48.546 27.9 -15.066 53.568q-13.392 50.778 -39.06 95.976 84.816 -35.154 153.45 -95.418l23.994 -21.204 31.806 3.348q38.502 4.464 72.54 4.464 113.832 0 212.877 -38.781t157.356 -104.625 58.311 -142.29 -58.311 -142.29 -157.356 -104.625 -212.877 -38.781z",strokeWidth:50,stroke:"#000",fill:"#fff"}),n.appendChild(o),e.appendChild(r),e.appendChild(n),e}(e);break;case"textbox":r=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","text");return W(e,{x:t.x,y:t.y+parseInt(t.size,10),fill:H(t.color||"#000"),fontSize:t.size}),e.innerHTML=V(t),e}(e);break;case"drawing":r=function(t){for(var e=[],n=document.createElementNS("http://www.w3.org/2000/svg","path"),r=0,o=t.lines.length;r<o;r++){var i=t.lines[r],a=t.lines[r+1];a&&e.push("M".concat(i[0]," ").concat(i[1]," ").concat(a[0]," ").concat(a[1]))}return W(n,{d:"".concat(e.join(" "),"Z"),stroke:H(t.color||"#000"),strokeWidth:t.width||1,fill:"none"}),n}(e)}return r&&(r.setAttribute("data-pdf-annotate-id",e.uuid),r.setAttribute("data-pdf-annotate-type",e.type),r.setAttribute("aria-hidden",!0),t.appendChild(J(r,n))),r}function G(t,e){var n=document.createElement("div"),r=document.createTextNode(t);return n.appendChild(r),n.setAttribute("id","pdf-annotate-screenreader-".concat(e)),n.style.position="absolute",n.style.left="-10000px",n.style.top="auto",n.style.width="1px",n.style.height="1px",n.style.overflow="hidden",n}function K(t){return function(t){if(Array.isArray(t))return Q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tt(t,e,n,r,o){var i=function(t,e,n){var r=document.querySelector('svg[data-pdf-annotate-page="'.concat(n,'"]')),o=r.getBoundingClientRect();return e=f(r,{y:e}).y+o.top,t=f(r,{x:t}).x+o.left,K(r.parentNode.querySelectorAll(".textLayer [data-canvas-width]")).filter((function(n){return s(t,e,n.getBoundingClientRect())}))[0]}(e=Math.max(e+2*(o?1:-1),0),n+2,r);if(!i)return!1;e+=2*(o?-1:1);var a=document.querySelector('svg[data-pdf-annotate-page="'.concat(r,'"]')),c=p(a,{left:i.getBoundingClientRect().left}).left-a.getBoundingClientRect().left,u=i.cloneNode(!0),l=u.innerHTML.split(""),d=[];for(u.style.position="absolute",u.style.top="-10000px",u.style.left="-10000px",document.body.appendChild(u);l.length;){if(">"===l[l.length-1])for(;l.length&&(d.unshift(l.pop()),"<"!==d[0]););if(u.innerHTML=l.join(""),c+p(a,{width:u.getBoundingClientRect().width}).width<=e)break;d.unshift(l.pop())}return i.innerHTML=l.join("")+t.outerHTML+d.join(""),u.parentNode.removeChild(u),!0}function et(t){return function(t){if(Array.isArray(t))return nt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rt(t,e,n,r){if(tt(t,e,n,r,!0))return!0;var o=document.querySelector('svg[data-pdf-annotate-page="'.concat(r,'"]')),i=o.getBoundingClientRect(),a=et(o.parentNode.querySelectorAll(".textLayer > div"));n=f(o,{y:n}).y+i.top,e=f(o,{x:e}).x+i.left;for(var c=0,u=a.length;c<u;c++){var l=a[c];if(n<=l.getBoundingClientRect().top)return l.parentNode.insertBefore(t,l),!0}var d=o.parentNode.querySelector(".textLayer");if(d&&s(e,n,d.getBoundingClientRect()))return d.appendChild(t),!0;return!1}function ot(t){if(t){var e=document.querySelector("#pdf-annotate-screenreader-".concat(t.annotation," ol"));if(e){var n=document.createElement("li");n.setAttribute("id","pdf-annotate-screenreader-comment-".concat(t.uuid)),n.appendChild(document.createTextNode("".concat(t.content))),e.appendChild(n)}}}function it(t,e,n){return(Array.isArray(n)?Promise.resolve(n):Ne.getStoreAdapter().getComments(t,e)).then((function(t){var n=document.getElementById("pdf-annotate-screenreader-".concat(e));if(n){var r=document.createElement("ol");r.setAttribute("id","pdf-annotate-screenreader-comment-list-".concat(e)),r.setAttribute("aria-label","Comments"),n.appendChild(r),t.forEach(ot)}}))}var at=["highlight","point","area"];function ct(t,e,n){Ne.getStoreAdapter().getAnnotations(t,e).then((function(t){return t.annotations.filter((function(t){return t.type===n}))})).then((function(e){return e.forEach((function(e){ut(t,e.uuid)})),e})).then(ft)}function ut(t,e){dt("pdf-annotate-screenreader-".concat(e)),dt("pdf-annotate-screenreader-".concat(e,"-end"))}function st(t,e,n){var r=document.querySelector("pdf-annotate-screenreader-comment-list-".concat(e));(r?Promise.resolve(!0):it(t,e,[]).then((function(){return r=document.querySelector("pdf-annotate-screenreader-comment-list-".concat(e)),!0}))).then((function(){ot(n)}))}function lt(t,e){dt("pdf-annotate-screenreader-comment-".concat(e))}function dt(t){var e=document.getElementById(t);e&&e.parentNode.removeChild(e)}function ft(t){t=Array.isArray(t)?t:[],Object.keys(vt).forEach((function(e){var n=vt[e];t.filter((function(t){return t.type===e})).sort(n).forEach((function(t,e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(t.type){case"highlight":case"strikeout":var n=t.rectangles,r=n[0],o=n[n.length-1];tt(G("Begin ".concat(t.type," annotation ").concat(e),t.uuid),r.x,r.y,t.page,!0),tt(G("End ".concat(t.type," annotation ").concat(e),"".concat(t.uuid,"-end")),o.x+o.width,o.y,t.page,!1);break;case"textbox":case"point":var i="textbox"===t.type?" (content: ".concat(t.content,")"):"";rt(G("".concat(t.type," annotation ").concat(e).concat(i),t.uuid),t.x,t.y,t.page);break;case"drawing":case"area":var a=void 0!==t.x?t.x:t.lines[0][0],c=void 0!==t.y?t.y:t.lines[0][1];rt(G("Unlabeled drawing",t.uuid),a,c,t.page)}at.includes(t.type)&&it(t.documentId,t.uuid)}(t,e+1)}))}))}function pt(t,e){return t.y<e.y?t.x-e.x:1}function yt(t,e){return pt(t.rectangles[0],e.rectangles[0])}x("annotation:add",(function(t,e,n){ct(t,e,n.type)})),x("annotation:edit",(function(t,e,n){ct(t,n.page,n.type)})),x("annotation:delete",ut),x("comment:add",st),x("comment:delete",lt);var vt={highlight:yt,strikeout:yt,drawing:function(t,e){var n=t.lines[0],r=e.lines[0];return pt({x:n[0],y:n[1]},{x:r[0],y:r[1]})},textbox:pt,point:pt,area:pt};function ht(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||gt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(t){return function(t){if(Array.isArray(t))return bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||gt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(t,e){if(t){if("string"==typeof t)return bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(t,e):void 0}}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var wt,xt,At,Et,Lt,St=!1,Ct=!1;function kt(t){_t(),wt=document.createElement("div");var e=document.createElement("a"),n=function(t){for(var e=t;(e=e.parentNode)&&e!==document;)if("SVG"===e.nodeName.toUpperCase()&&"true"===e.getAttribute("data-pdf-annotate-container"))return e;return null}(t).parentNode,r=t.getAttribute("data-pdf-annotate-id");It(d(t),r,e,n)}function It(t,e,n,r){var o=t.left-3,i=t.top-3;wt.setAttribute("id","pdf-annotate-edit-overlay"),wt.setAttribute("data-target-id",e),wt.style.boxSizing="content-box",wt.style.position="absolute",wt.style.top="".concat(i,"px"),wt.style.left="".concat(o,"px"),wt.style.width="".concat(t.width,"px"),wt.style.height="".concat(t.height,"px"),wt.style.border="".concat(3,"px solid ").concat(a),wt.style.borderRadius="".concat(3,"px"),n.innerHTML="Ã—",n.setAttribute("href","javascript://"),n.style.background="#fff",n.style.borderRadius="20px",n.style.border="1px solid #bbb",n.style.color="#bbb",n.style.fontSize="16px",n.style.padding="2px",n.style.textAlign="center",n.style.textDecoration="none",n.style.position="absolute",n.style.top="-13px",n.style.right="-13px",n.style.width="25px",n.style.height="25px",wt.appendChild(n),r.appendChild(wt),document.addEventListener("click",Ot),document.addEventListener("keyup",Nt),document.addEventListener("mousedown",Rt),n.addEventListener("click",jt),n.addEventListener("mouseover",(function(){n.style.color="#35A4DC",n.style.borderColor="#999",n.style.boxShadow="0 1px 1px #ccc"})),n.addEventListener("mouseout",(function(){n.style.color="#bbb",n.style.borderColor="#bbb",n.style.boxShadow=""})),wt.addEventListener("mouseover",(function(){Ct||(n.style.display="")})),wt.addEventListener("mouseout",(function(){n.style.display="none"}));var c=new Event("annotation:select");document.dispatchEvent(c)}function _t(){wt&&(wt.parentNode.removeChild(wt),wt=null),document.removeEventListener("click",Ot),document.removeEventListener("keyup",Nt),document.removeEventListener("mousedown",Rt),document.removeEventListener("mousemove",Pt),document.removeEventListener("mouseup",Tt);var t=new Event("annotation:deselect");document.dispatchEvent(t),h()}function jt(){if(wt){var t=wt.getAttribute("data-target-id"),e=document.querySelectorAll('[data-pdf-annotate-id="'.concat(t,'"]')),n=m(wt.parentNode.querySelector("svg.drawingLayer")).documentId;mt(e).forEach((function(t){t.parentNode.removeChild(t)})),Ne.getStoreAdapter().deleteAnnotation(n,t);var r=new Event("annotation:delete");document.dispatchEvent(r),_t()}}function Ot(t){if(u(t.clientX,t.clientY)){var e=document.getElementById("pdf-annotate-edit-overlay");if(e){if(Ct||t.target===e)return;_t()}}}function Nt(t){wt&&46===t.keyCode&&"textarea"!==t.target.nodeName.toLowerCase()&&"input"!==t.target.nodeName.toLowerCase()&&jt()}function Rt(t){if(t.target===wt){var e=wt.getAttribute("data-target-id"),n=document.querySelector('[data-pdf-annotate-id="'.concat(e,'"]')).getAttribute("data-pdf-annotate-type");"highlight"!==n&&"strikeout"!==n&&(Ct=!0,xt=t.clientX,At=t.clientY,Et=wt.offsetLeft,Lt=wt.offsetTop,wt.style.background="rgba(255, 255, 255, 0.7)",wt.style.cursor="move",wt.querySelector("a").style.display="none",document.addEventListener("mousemove",Pt),document.addEventListener("mouseup",Tt),v())}}function Pt(t){wt.getAttribute("data-target-id");var e=wt.parentNode.getBoundingClientRect(),n=Lt+(t.clientY-At),r=Et+(t.clientX-xt),o=e.height,i=e.width;n>0&&n+wt.offsetHeight<o&&(wt.style.top="".concat(n,"px")),r>0&&r+wt.offsetWidth<i&&(wt.style.left="".concat(r,"px"))}function Tt(t){var e=wt.getAttribute("data-target-id"),n=document.querySelectorAll('[data-pdf-annotate-id="'.concat(e,'"]')),r=n[0].getAttribute("data-pdf-annotate-type"),o=wt.parentNode.querySelector("svg.drawingLayer"),i=m(o).documentId;function a(t,e){return{deltaX:3+p(o,{x:wt.offsetLeft}).x-t,deltaY:3+p(o,{y:wt.offsetTop}).y-e}}wt.querySelector("a").style.display="",Ne.getStoreAdapter().getAnnotation(i,e).then((function(t){if(["area","highlight","point","textbox"].indexOf(r)>-1){var c=(w="x",x="y",a(parseInt(n[0].getAttribute(w),10),parseInt(n[0].getAttribute(x),10))),u=c.deltaX,s=c.deltaY;mt(n).forEach((function(e,n){if(0!==s){var i=parseInt(e.getAttribute("y"),10)+s,a=i;"point"===r&&(a=f(o,{viewY:a}).viewY),e.setAttribute("y",a),t.rectangles?t.rectangles[n].y=i:t.y&&(t.y=i)}if(0!==u){var c=parseInt(e.getAttribute("x"),10)+u,l=c;"point"===r&&(l=f(o,{viewX:l}).viewX),e.setAttribute("x",l),t.rectangles?t.rectangles[n].x=c:t.x&&(t.x=c,"textbox"===r&&Array.from(e.children).forEach((function(t){return t.setAttribute("x",c)})))}}))}else if("drawing"===r){var l=p(o,d(n[0])),y=ht(t.lines[0],2),v=y[0],h=y[1],m=a(v,h),g=m.deltaX,b=m.deltaY;b+=h-l.top,g+=v-l.left,t.lines.forEach((function(e,n){var r=ht(t.lines[n],2),o=r[0],i=r[1];t.lines[n][0]=o+g,t.lines[n][1]=i+b})),n[0].parentNode.removeChild(n[0]),Z(o,t)}var w,x;Ne.getStoreAdapter().editAnnotation(i,e,t)})),setTimeout((function(){Ct=!1}),0),wt.style.background="",wt.style.cursor="",document.removeEventListener("mousemove",Pt),document.removeEventListener("mouseup",Tt),h()}function qt(t){kt(t)}var Bt,Mt,Ft,Xt,Yt=!1;function Wt(){Ft=null,Xt=[],document.addEventListener("mousemove",Ht),document.addEventListener("mouseup",zt)}function zt(t){var e;if(Xt.length>1&&(e=u(t.clientX,t.clientY))){var n=m(e),r=n.documentId,o=n.pageNumber;Ne.getStoreAdapter().addAnnotation(r,o,{type:"drawing",width:Bt,color:Mt,lines:Xt}).then((function(t){Ft&&e.removeChild(Ft),Z(e,t)}))}document.removeEventListener("mousemove",Ht),document.removeEventListener("mouseup",zt)}function Ht(t){!function(t,e){var n=u(t,e);if(!n)return;var r=n.getBoundingClientRect(),o=p(n,{x:t-r.left,y:e-r.top});if(Xt.push([o.x,o.y]),Xt.length<=1)return;Ft&&n.removeChild(Ft);Ft=Z(n,{type:"drawing",color:Mt,width:Bt,lines:Xt})}(t.clientX,t.clientY)}function Ut(t){27===t.keyCode&&(Xt=null,Ft.parentNode.removeChild(Ft),document.removeEventListener("mousemove",Ht),document.removeEventListener("mouseup",zt))}var Dt,Vt=!1;function $t(t){!Dt&&u(t.clientX,t.clientY)&&((Dt=document.createElement("input")).setAttribute("id","pdf-annotate-point-input"),Dt.setAttribute("placeholder","Enter comment"),Dt.style.border="3px solid ".concat(a),Dt.style.borderRadius="3px",Dt.style.position="fixed",Dt.style.top="".concat(t.clientY,"px"),Dt.style.left="".concat(t.clientX,"px"),Dt.addEventListener("blur",Jt),Dt.addEventListener("keyup",Zt),document.getElementById("content-wrapper").appendChild(Dt),Dt.focus())}function Jt(){Gt()}function Zt(t){27===t.keyCode?Kt():13===t.keyCode&&Gt()}function Gt(){if(Dt.value.trim().length>0){var t=parseInt(Dt.style.left,10),e=parseInt(Dt.style.top,10),n=Dt.value.trim(),r=u(t,e);if(!r)return;var o=r.getBoundingClientRect(),i=m(r),a=i.documentId,c=i.pageNumber,s=Object.assign({type:"point"},p(r,{x:t-o.left,y:e-o.top}));Ne.getStoreAdapter().addAnnotation(a,c,s).then((function(t){Ne.getStoreAdapter().addComment(a,t.uuid,n),Z(r,t)}))}Kt()}function Kt(){Dt.removeEventListener("blur",Jt),Dt.removeEventListener("keyup",Zt),document.getElementById("content-wrapper").removeChild(Dt),Dt=null}function Qt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function te(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Qt(i,r,o,a,c,"next",t)}function c(t){Qt(i,r,o,a,c,"throw",t)}a(void 0)}))}}function ee(t){return function(t){if(Array.isArray(t))return ne(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ne(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var re,oe,ie,ae,ce=!1;function ue(t){var e;if("area"===re&&(e=u(t.clientX,t.clientY))){var n=e.getBoundingClientRect();ie=t.clientY,ae=t.clientX,(oe=document.createElement("div")).style.position="absolute",oe.style.top="".concat(ie-n.top,"px"),oe.style.left="".concat(ae-n.left,"px"),oe.style.border="3px solid ".concat(a),oe.style.borderRadius="3px",e.parentNode.appendChild(oe),document.addEventListener("mousemove",se),v()}}function se(t){var e=oe.parentNode.querySelector("svg.drawingLayer").getBoundingClientRect();ae+(t.clientX-ae)<e.right&&(oe.style.width="".concat(t.clientX-ae,"px")),ie+(t.clientY-ie)<e.bottom&&(oe.style.height="".concat(t.clientY-ie,"px"))}function le(t){var e,n;if("area"!==re&&(e=function(){try{var t=window.getSelection().getRangeAt(0).getClientRects();if(t.length>0&&t[0].width>0&&t[0].height>0)return t}catch(t){}return null}())){u(e[0].left,e[0].top);n=fe(re,ee(e).map((function(t){return{top:t.top,left:t.left,width:t.width,height:t.height}})))}else if("area"===re&&oe){var r=oe.parentNode.querySelector("svg.drawingLayer").getBoundingClientRect();n=fe(re,[{top:parseInt(oe.style.top,10)+r.top,left:parseInt(oe.style.left,10)+r.left,width:parseInt(oe.style.width,10),height:parseInt(oe.style.height,10)}]),oe.parentNode.removeChild(oe),oe=null,document.removeEventListener("mousemove",se),h()}return n}function de(t){27===t.keyCode&&(window.getSelection().removeAllRanges(),oe&&oe.parentNode&&(oe.parentNode.removeChild(oe),oe=null,document.removeEventListener("mousemove",se)))}function fe(t,e,n){var r,o=u(e[0].left,e[0].top);if(o){var i=o.getBoundingClientRect();if(n||("highlight"===t?n="FFFF00":"strikeout"===t&&(n="FF0000")),0!==(r={type:t,color:n,rectangles:ee(e).map((function(e){var n=0;return"strikeout"===t&&(n=e.height/2),p(o,{y:e.top+n-i.top,x:e.left-i.left,width:e.width,height:e.height})})).filter((function(t){return t.width>0&&t.height>0&&t.x>-1&&t.y>-1}))}).rectangles.length){if("area"===t){var a=r.rectangles[0];delete r.rectangles,r.x=a.x,r.y=a.y,r.width=a.width,r.height=a.height}var c=m(o),s=c.documentId,l=c.pageNumber;return Ne.getStoreAdapter().addAnnotation(s,l,r).then((function(t){r=t,Z(o,t)})),r}}}function pe(){return(pe=te(regeneratorRuntime.mark((function t(e,n,r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ne.getStoreAdapter().getAnnotation("",n);case 2:(o=t.sent).color=r.color||o.color,o.stroke="#".concat(r.stroke),o.opacity=r.opacity||o.opacity,o.strokeWidth=r.strokeWidth||o.strokeWidth,Ne.getStoreAdapter().editAnnotation("",n,o);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ye(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function ve(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ye(i,r,o,a,c,"next",t)}function c(t){ye(i,r,o,a,c,"throw",t)}a(void 0)}))}}var he,me,ge,be=!1;function we(t){!he&&u(t.clientX,t.clientY)&&((he=document.createElement("textarea")).setAttribute("id","pdf-annotate-text-input"),he.style.border="3px solid ".concat(a),he.style.borderRadius="3px",he.style.position="fixed",he.style.top="".concat(t.clientY,"px"),he.style.left="".concat(t.clientX,"px"),he.style.fontSize="".concat(me,"px"),he.style.background="transparent",he.style.whiteSpace="pre-line",he.addEventListener("blur",xe),he.addEventListener("keyup",Ae),document.getElementById("content-wrapper").appendChild(he),he.focus())}function xe(){!function(){if(he.value.trim().length>0){var t=parseInt(he.style.left,10),e=parseInt(he.style.top,10),n=u(t,e);if(!n)return;var r=m(n),o=r.documentId,i=r.pageNumber,a=n.getBoundingClientRect(),c=Object.assign({type:"textbox",size:me,color:ge,content:he.value.trim()},p(n,{x:t-a.left,y:e-a.top,width:he.offsetWidth,height:he.offsetHeight}));Ne.getStoreAdapter().addAnnotation(o,i,c).then((function(t){Z(n,t);var e=new CustomEvent("text:saved",{detail:{uuid:t.uuid,content:t.content}});document.dispatchEvent(e)}))}Ee()}()}function Ae(t){27===t.keyCode&&Ee()}function Ee(){he&&(he.removeEventListener("blur",xe),he.removeEventListener("keyup",Ae),document.getElementById("content-wrapper").removeChild(he),he=null,Le())}function Le(){be&&(be=!1,document.removeEventListener("mouseup",we))}function Se(){return(Se=ve(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:we(e);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ce(){return(Ce=ve(regeneratorRuntime.mark((function t(e,n){var r,o,i,a,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=document.querySelector("svg.drawingLayer"),o=document.querySelector('[data-pdf-annotate-id="'.concat(e,'"]')),i=m(r),a=i.documentId,t.next=5,Ne.getStoreAdapter().getAnnotation(a,e);case 5:(c=t.sent).content=n,o.innerHTML=V(c),Ne.getStoreAdapter().editAnnotation(a,e,c);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ke(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ie(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _e(t){if(Math.floor(t)===t)return[t,1];var e=1/t;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];for(var n=t>1?e:t,r=0,o=1,i=1,a=1;;){var c=r+i,u=o+a;if(u>8)break;n<=c/u?(i=c,a=u):(r=c,o=u)}return n-r/o<i/a-n?n===t?[r,o]:[o,r]:n===t?[i,a]:[a,i]}function je(t,e){var n=t%e;return 0===n?t:Math.round(t-n+e)}const Oe={addEventListener:x,removeEventListener:A,fireEvent:w,disableEdit:function(){_t(),St&&(St=!1,A("annotation:click",qt))},enableEdit:function(){St||(St=!0,x("annotation:click",qt))},disablePen:function(){Yt&&(Yt=!1,document.removeEventListener("mousedown",Wt),document.removeEventListener("keyup",Ut),h())},enablePen:function(){Yt||(Yt=!0,document.addEventListener("mousedown",Wt),document.addEventListener("keyup",Ut),v())},deleteAnnotationFromId:function(t){var e=document.querySelectorAll('[data-pdf-annotate-id="'.concat(t,'"]')),n=m(document.querySelector("svg.drawingLayer")).documentId;mt(e).forEach((function(t){t.parentNode.removeChild(t)})),Ne.getStoreAdapter().deleteAnnotation(n,t)},clearAll:function(){var t=m(document.querySelector("svg.drawingLayer")),e=t.documentId,n=t.pageNumber;Ne.getStoreAdapter().getAnnotations(e,n).then((function(t){t.annotations.forEach((function(t){return Ne.getStoreAdapter().deleteAnnotation(e,t.annotationId)}))}))},selectAnnotationFromId:function(t){_t(),wt=document.createElement("div");var e=document.createElement("a"),n=document.querySelector("svg.drawingLayer").parentNode;It(d(document.querySelector('[data-pdf-annotate-id="'.concat(t,'"]'))),t,e,n)},setPen:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"000000";Bt=parseInt(t,10),Mt=e},disablePoint:function(){Vt&&(Vt=!1,document.removeEventListener("mouseup",$t))},enablePoint:function(){Vt||(Vt=!0,document.addEventListener("mouseup",$t))},disableRect:function(){ce&&(ce=!1,document.removeEventListener("mouseup",le),document.removeEventListener("mousedown",ue),document.removeEventListener("keyup",de))},enableRect:function(t){re=t,ce||(ce=!0,document.addEventListener("mouseup",le),document.addEventListener("mousedown",ue),document.addEventListener("keyup",de))},highlightText:function(t,e){ce=!0,re=t;var n=le();return window.getSelection().removeAllRanges(),ce=!1,n},editRect:function(t,e,n){return pe.apply(this,arguments)},disableText:Le,enableText:function(){be||(be=!0,document.addEventListener("mouseup",we))},setText:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"000000";me=parseInt(t,10),ge=e},openTextInput:function(t){return Se.apply(this,arguments)},editText:function(t,e){return Ce.apply(this,arguments)},createPage:function(t){var e=document.createElement("div");e.innerHTML='\n  <div style="visibility: hidden;" class="page" data-loaded="false">\n    <div class="canvasWrapper">\n      <canvas></canvas>\n    </div>\n    <svg class="drawingLayer"></svg>\n    <div class="textLayer"></div>\n    <div class="annotationLayer"></div>\n  </div>\n';var n=e.children[0],r=n.querySelector("canvas");return n.setAttribute("id","pageContainer".concat(t)),n.setAttribute("data-page-number",t),r.mozOpaque=!0,r.setAttribute("id","page".concat(t)),n},renderPage:function(t,e){var n=e.documentId,r=e.pdfDocument,o=e.scale,i=e.rotate,a=new pdfjsViewer.EventBus;return Promise.all([r.getPage(t),Ne.getAnnotations(n,t)]).then((function(e){var n=ke(e,2),r=n[0],c=n[1],u=document.getElementById("pageContainer".concat(t)),s=u.querySelector(".drawingLayer"),l=u.querySelector(".canvasWrapper canvas").getContext("2d",{alpha:!1}),d=r.getViewport({scale:o,rotation:i}),f=function(t,e,n){var r=document.getElementById("pageContainer".concat(t)),o=r.querySelector(".canvasWrapper canvas"),i=r.querySelector(".drawingLayer"),a=r.querySelector(".canvasWrapper"),c=r.querySelector(".textLayer"),u=(f=n,p=window.devicePixelRatio||1,y=f.webkitBackingStorePixelRatio||1,v=p/y,{sx:v,sy:v,scaled:1!==v}),s=u.scaled?[u.sx,0,0,u.sy,0,0]:null,l=_e(u.sx),d=_e(u.sy);var f,p,y,v;return r.style.visibility="",o.width=je(e.width*u.sx,l[0]),o.height=je(e.height*u.sy,d[0]),o.style.width=je(e.width,l[1])+"px",o.style.height=je(e.height,l[1])+"px",i.setAttribute("width",e.width),i.setAttribute("height",e.height),i.style.width="".concat(e.width,"px"),i.style.height="".concat(e.height,"px"),r.style.width="".concat(e.width,"px"),r.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px"),a.style.height="".concat(e.height,"px"),c.style.width="".concat(e.width,"px"),c.style.height="".concat(e.height,"px"),s}(t,d,l);return Promise.all([r.render({canvasContext:l,viewport:d,transform:f,renderInteractiveForms:!0}),Ne.render(s,d,c)]).then((function(){return r.getTextContent({normalizeWhitespace:!0}).then((function(e){return new Promise((function(n,o){var i=u.querySelector(".textLayer"),s=(new pdfjsViewer.DefaultTextLayerFactory).createTextLayerBuilder(i,t-1,d,!1,a);s.setTextContent(e),s.render();var l=u.querySelector(".annotationLayer");(new pdfjsViewer.DefaultAnnotationLayerFactory).createAnnotationLayerBuilder(l,r).render(d),setTimeout((function(){try{ft(c.annotations),n()}catch(t){o(t)}}))}))}))})).then((function(){return u.setAttribute("data-loaded","true"),[r,c]}))}))}},Ne={StoreAdapter:S,LocalStoreAdapter:P,__storeAdapter:new S,getStoreAdapter:function(){return this.__storeAdapter},setStoreAdapter:function(t){this.__storeAdapter=t},UI:Oe,render:function(t,e,n){return new Promise((function(r,o){return t.innerHTML="",t.setAttribute("data-pdf-annotate-container",!0),t.setAttribute("data-pdf-annotate-viewport",JSON.stringify(e)),t.removeAttribute("data-pdf-annotate-document"),t.removeAttribute("data-pdf-annotate-page"),n?(t.setAttribute("data-pdf-annotate-document",n.documentId),t.setAttribute("data-pdf-annotate-page",n.pageNumber),Array.isArray(n.annotations)&&0!==n.annotations.length?(n.annotations.forEach((function(n){Z(t,n,e)})),void r(t)):r(t)):r(t)}))},getAnnotations:function(t,e){var n;return(n=this.getStoreAdapter()).getAnnotations.apply(n,arguments)}},Re=Ne})(),r})()}));
//# sourceMappingURL=pdf-annotate.min.js.map